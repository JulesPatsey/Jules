{"version":3,"sources":["TextTask.ts"],"names":[],"mappings":";;;;;;AAAA,gCAAyB,4BAA4B,CAAC,CAAA;AAUtD;IAA8B,4BAAyB;IAAvD;QAA8B,8BAAyB;QAC9C,SAAI,GAAW,MAAM,CAAC;QACtB,eAAU,GAAoB;YACnC,SAAS,EAAE,CAAC,cAAc,CAAC;SAC5B,CAAC;IA6BJ,CAAC;IA3BQ,8BAAW,GAAlB,UAAmB,IAAmB;QACpC,4BAA4B;QAC5B,IAAM,KAAK,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;QAChC,IAAM,QAAQ,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC;QAClC,yCAAS,CAAqB;QACtC,IAAA,qBAAoD,EAA5C,wBAAS,EAAE,8BAAY,CAAsB;QACrD,2BAA2B;QAE3B,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;YACd,IAAM,kBAAkB,GAA2B,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC;iBACnE,IAAI,CAAC,QAAQ,CAAC;gBACb,QAAQ,EAAE,kCAAkC;aAC7C,CAAC,CAAC;iBACF,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YAE9B,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;gBACjB,MAAM,CAAC,KAAK,CACV,kBAAkB,EAClB,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC;qBAChB,IAAI,CAAC,QAAQ,EAAE,CAAC;qBAChB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CACjC,CAAC;YACJ,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,CAAC,kBAAkB,CAAC;YAC5B,CAAC;QACH,CAAC;IACH,CAAC;IACH,eAAC;AAAD,CAjCA,AAiCC,CAjC6B,0BAAQ,GAiCrC;AAjCY,gBAAQ,WAiCpB,CAAA","file":"TextTask.js","sourcesContent":["import { GulpTask } from '@microsoft/gulp-core-build';\r\nimport gulpType = require('gulp');\r\n\r\nexport interface ITextTaskConfig {\r\n  /**\r\n   * Glob matches for files that should be converted into modules.\r\n   */\r\n  textMatch?: string[];\r\n}\r\n\r\nexport class TextTask extends GulpTask<ITextTaskConfig> {\r\n  public name: string = 'text';\r\n  public taskConfig: ITextTaskConfig = {\r\n    textMatch: ['src/**/*.txt']\r\n  };\r\n\r\n  public executeTask(gulp: gulpType.Gulp): NodeJS.ReadWriteStream {\r\n    /* tslint:disable:typedef */\r\n    const merge = require('merge2');\r\n    const texttojs = require('gulp-texttojs');\r\n    const { textMatch } = this.taskConfig;\r\n    const { libFolder, libAMDFolder } = this.buildConfig;\r\n    /* tslint:enable:typedef */\r\n\r\n    if (textMatch) {\r\n      const commonJSTextStream: NodeJS.ReadWriteStream = gulp.src(textMatch)\r\n        .pipe(texttojs({\r\n          template: 'module.exports = <%= content %>;'\r\n        }))\r\n        .pipe(gulp.dest(libFolder));\r\n\r\n      if (libAMDFolder) {\r\n        return merge(\r\n          commonJSTextStream,\r\n          gulp.src(textMatch)\r\n            .pipe(texttojs())\r\n            .pipe(gulp.dest(libAMDFolder))\r\n        );\r\n      } else {\r\n        return commonJSTextStream;\r\n      }\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":"..\\src"}